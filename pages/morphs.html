<!DOCTYPE html>
<html lang="en">
<head>
	<style>
		.morph-pic {
			text-align: center;
		}
		.morph-pic img {
			width: auto;
			height: auto;
			max-width: 100%;
			max-height: 24rem;
		}
		.ui.horizontal.segments.inverted {
			border: 1px solid rgba(255, 255, 255, 0.15);
		}
	</style>
</head>

<body>
<div id="morph-grid" class="ui grid">
  <div class="two wide column">
    <div id="morph-tabs" class="ui vertical sticky fluid tabular menu inverted">
      <a class="item active" data-tab="morphs-1">Biomorphs</a>
      <a class="item" data-tab="morphs-2">Pod Biomorphs</a>
      <a class="item" data-tab="morphs-3">Uplift Biomorhs</a>
      <a class="item" data-tab="morphs-4">Synthmorphs</a>
      <a class="item" data-tab="morphs-5">Infomorphs</a>
    </div>
  </div>
  <div class="fourteen wide stretched column">
	<vcomp-typecard :morphs="morphs" :morph_types="morph_types" idappend="1" :active="true" mytype="Biomorph"></vcomp-typecard>
	<vcomp-typecard :morphs="morphs" :morph_types="morph_types" idappend="2" mytype="Pod"></vcomp-typecard>
	<vcomp-typecard :morphs="morphs" :morph_types="morph_types" idappend="3" mytype="Uplift"></vcomp-typecard>
	<vcomp-typecard :morphs="morphs" :morph_types="morph_types" idappend="4" mytype="Synthmorph"></vcomp-typecard>
	<vcomp-typecard :morphs="morphs" :morph_types="morph_types" idappend="5" mytype="Infomorph"></vcomp-typecard>
  </div>
</div>
</body>

<script>
	var vue_morphs = new Vue({
	  el: '#morph-grid',
	  data: {
	    morphs: [],
	    morph_types: []
	  },
	  updated: function() {
	    $('#morph-tabs .item').tab({
	      onVisible: function(){
	        $("#morph-tabs").sticky('refresh');
	      }
	    });
	  },
	  components: {
	  	vcompTypecard: morphtype
	  },
	  computed: {
	    biomorphs: function () {
	      return this.morphs.filter(function(element){
	        if(element.type == "Biomorph"){return true;}
	      });
	    },
	    pod_biomorphs: function () {
	      return this.morphs.filter(function(element){
	        if(element.type == "Pod"){return true;}
	      });
	    },
	    uplift_biomorphs: function () {
	      return this.morphs.filter(function(element){
	        if(element.type == "Uplift"){return true;}
	      });
	    },
	    synthmorphs: function () {
	      return this.morphs.filter(function(element){
	        if(element.type == "Synthmorph"){return true;}
	      });
	    },
	    infomorphs: function () {
	      return this.morphs.filter(function(element){
	        if(element.type == "Infomorph"){return true;}
	      });
	    },
	    flexbot_parts: function () {
	      return this.morphs.filter(function(element){
	        if(element.type == "Flexbot Part"){return true;}
	      });
	    }
	  }
	})

	$.getJSON('data/morphs.json').then(function(json){vue_morphs.morphs = json;});
	$.getJSON('data/morph_types.json').then(function(json){vue_morphs.morph_types = json;});

</script>
</html>